#pragma once
#include "dcc/bitutils.h"

#define MSM6800_REG_FLASH_BUFFER 0x0
#define MSM6800_REG_FLASH_ADDR 0x300
#define MSM6800_REG_FLASH_CMD 0x304
#define MSM6800_REG_FLASH_STATUS 0x308
#define MSM6800_REG_FLASH_COMMON_CFG 0x31C
#define MSM6800_REG_FLASH_ID_DATA 0x320
#define MSM6800_REG_FLASH_SPARE_DATA 0x324
#define MSM6800_REG_FLASH_CFG1_FLASH1 0x328
#define MSM6800_REG_FLASH_CFG1_FLASH2 0x32c
#define MSM6800_REG_FLASH_CFG2_FLASH1 0x330
#define MSM6800_REG_FLASH_CFG2_FLASH2 0x334

#define MSM6800_CMD_FLASH_RESET 0
#define MSM6800_CMD_FLASH_PAGE_READ 1
#define MSM6800_CMD_FLASH_FLAG_READ 2
#define MSM6800_CMD_FLASH_PAGE_WRITE 3
#define MSM6800_CMD_FLASH_BLOCK_ERASE 4
#define MSM6800_CMD_FLASH_ID_FETCH 5
#define MSM6800_CMD_FLASH_STATUS_CHECK 6
#define MSM6800_CMD_FLASH_RESET_NAND 7

bitmask MSM6800_ADDR_SPARE_AREA_BYTE_ADDRESS = {0, 0x3f};
bitmask MSM6800_ADDR_FLASH_PAGE_ADDRESS = {9, 0x7fffff};

bitmask MSM6800_CMD_OP_CMD = {0, 0x7};
bitmask MSM6800_CMD_SW_CMD_EN = {3, 0x1};
bitmask MSM6800_CMD_SW_CMD_VAL = {4, 0xff};
bitmask MSM6800_CMD_SW_CMD_ADDR_SEL = {12, 0x1};
bitmask MSM6800_CMD_SW_CMD1_REPLACE = {13, 0x1};
bitmask MSM6800_CMD_SW_CMD2_REPLACE = {14, 0x1};

bitmask MSM6800_STATUS_OP_STATUS = {0, 0x7};
bitmask MSM6800_STATUS_OP_ERR = {3, 0x1};
bitmask MSM6800_STATUS_CORRECTABLE_ERROR = {4, 0x1};
bitmask MSM6800_STATUS_READY_BUSY_N = {5, 0x1};
bitmask MSM6800_STATUS_ECC_SELF_ERR = {6, 0x1};
bitmask MSM6800_STATUS_WRITE_OP_RESULT = {7, 0x1};
bitmask MSM6800_STATUS_OP_FAILURE = {0, 0x88};
bitmask MSM6800_STATUS_READY_BUSY_N_STATUS = {13, 0x1};
bitmask MSM6800_STATUS_WRITE_PROTECT = {14, 0x1};
bitmask MSM6800_STATUS_NAND_AUTOPROBE_DONE = {15, 0x1};
bitmask MSM6800_STATUS_NAND_AUTOPROBE_ISLARGE = {16, 0x1};
bitmask MSM6800_STATUS_NAND_AUTOPROBE_IS16BIT = {17, 0x1};
bitmask MSM6800_STATUS_READ_ERROR = {31, 0x1};

bitmask MSM6800_COMMONCFG_BUFFER_MEM_WRITE_WAIT = {0, 0x1};
bitmask MSM6800_COMMONCFG_ECC_ERR_SELF_DETECT = {1, 0x1};
bitmask MSM6800_COMMONCFG_ECC_HALT_DIS = {2, 0x1};
bitmask MSM6800_COMMONCFG_CLK_HALT_DIS = {3, 0x1};
bitmask MSM6800_COMMONCFG_NAND_SEL = {4, 0x1};
bitmask MSM6800_COMMONCFG_DM_EN = {5, 0x1};
bitmask MSM6800_COMMONCFG_NAND_AUTOPROBE = {6, 0x1};

bitmask MSM6800_FLASH_NAND_DEVID = {0, 0xff};
bitmask MSM6800_FLASH_NAND_MFRID = {8, 0xff};
bitmask MSM6800_FLASH_NAND_EXTID = {16, 0xff};

bitmask MSM6800_CONFIG1_ECC_DISABLED = {0, 0x1};
bitmask MSM6800_CONFIG1_BUSFREE_SUPPORT_SELECT = {1, 0x1};
bitmask MSM6800_CONFIG1_NAND_SIZE = {2, 0xf};
bitmask MSM6800_CONFIG1_PAGE_IS_2KB = {6, 0x1};
bitmask MSM6800_CONFIG1_WIDE_NAND = {7, 0x1};
bitmask MSM6800_CONFIG1_NAND_RECOVERY_CYCLE = {8, 0x7};

bitmask MSM6800_CONFIG2_ID_RD_HOLD = {0, 0x1f};
bitmask MSM6800_CONFIG2_RD_HOLD = {5, 0x1f};
bitmask MSM6800_CONFIG2_RD_SETUP = {10, 0x1f};
bitmask MSM6800_CONFIG2_WR_HOLD = {15, 0x1f};
bitmask MSM6800_CONFIG2_WR_SETUP = {20, 0x1f};
bitmask MSM6800_CONFIG2_WR_CS_SETUP = {25, 0x1f};